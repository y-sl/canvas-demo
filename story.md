一、 角色与总体目标

你是一位顶尖的前端架构师。你的任务是从零开始，全新构建一个功能完整的“可视化页面搭建原型”。这个原型需要具备高度的可扩展性、稳健的数据管理和流畅的编辑体验，让用户可以通过可视化操作，完成一个动态活动页面的所有元素配置。

二、 技术栈要求

核心库： Fabric.js (v5.x)，用于处理所有画布（Canvas）相关的交互。

样式： Tailwind CSS，用于快速构建现代化、美观的界面。

基础： React

交付物： 一个功能完整的、所有代码都在内的单文件HTML应用。

三、 核心功能需求 (Feature List)

1. 整体界面布局
采用两栏式布局：

左栏（70%宽度）：主编辑区，包含画布和相关操作按钮。

右栏（30%宽度）：属性配置面板，用于编辑当前选中模块的详细属性。

2. 主编辑区 (画布区) 功能

画布容器：

提供一个“上传背景长图”的按钮。

Fabric.js画布的宽度必须自动缩放，以100%适应其父容器的宽度，并保持原始图片的宽高比。画布不应出现横向滚动条。

画布内的所有内容（背景图和模块）都应同步缩放。

模块绘制与交互：

用户可以通过在画布上按住鼠标并拖拽来创建一个新的矩形模块。

所有创建出的模块都应是可选中、可移动、可缩放的。

全局操作：

生成预览：按钮，点击后在新标签页打开一个纯净的H5预览页面。

导出JSON：按钮，点击后生成并以下载文件（config.json）的形式提供最终配置数据。

(选装) 清空画布：按钮，用于清除所有模块和背景图，重新开始。

(选装) 图层控制：当选中一个模块时，提供“置顶”、“置底”、“上移一层”、“下移一层”的按钮。

3. 属性配置面板功能

动态展示：

默认状态下，提示用户“请在左侧画布中拖拽或选择一个模块”。

当选中一个模块时，此面板会根据模块类型动态生成所有可配置的表单项。

模块类型系统 (需采用配置式管理)：

提供一个“模块类型（Module Type）”的下拉选择框。

支持以下四种模块类型：BUTTON (跳转按钮), VIDEO (视频播放), GIF (动态图), TEXT (文本)。

系统设计应能轻易扩展，支持未来新增模块类型。

动态配置项 (根据模块类型变化)：

当类型为 TEXT 时：

textContent (文本内容): 使用 <textarea>。

fontSize (字号): 数字输入框。

color (文字颜色): 颜色选择器 <input type="color">。

fontWeight (字重): 下拉框（normal, bold）。

textAlign (对齐方式): 下拉框（left, center, right）。

当类型为 BUTTON 时：

**事件类型（Action Type）**下拉框，包含 JUMP_URL, OPEN_VIP_PAGE, SHOW_TOAST。

根据选择的事件类型，动态显示不同输入框：

JUMP_URL: 显示“跳转链接(URL)”输入框。

OPEN_VIP_PAGE: 无需额外输入。

SHOW_TOAST: 显示“提示文字”输入框。

当类型为 VIDEO 或 GIF 时： 提供对应的URL输入框及其他相关配置（如自动播放、静音等）。

删除功能： 提供一个“删除此模块”按钮，可删除当前选中的模块。

4. 数据与状态管理

单一数据源：所有模块的属性（几何信息、业务数据）应由一个统一的状态管理器维护。任何对画布或属性面板的操作都应先更新此状态，再由状态驱动UI更新。

本地持久化 (推荐)：编辑器的所有配置（背景图、模块列表及属性）应自动保存至浏览器的 localStorage。当用户再次打开页面时，能自动恢复上次的编辑状态。

最终数据导出：

点击“导出JSON”按钮后，程序需要遍历所有模块，生成最终的配置JSON。

坐标与尺寸计算：所有模块的几何信息（left, top, width, height）必须计算为相对于背景图总宽高的百分比字符串（例如 "10.5%"）。

JSON结构必须清晰，严格遵循下面的示例格式。

5. JSON结构示例 (保持不变)

JSON

{
  "backgroundImageUrl": "data:image/jpeg;base64,...(或服务器URL)",
  "modules": [
    {
      "type": "BUTTON",
      "rect": { "left": "10.5%", "top": "25.2%", "width": "80%", "height": "5.5%" },
      "action": { 
        "type": "SHOW_TOAST", 
        "data": { "text": "这是一个弹窗提示！" }
      }
    },
    {
      "type": "TEXT",
      "rect": { "left": "15%", "top": "60%", "width": "70%", "height": "10%" },
      "data": { 
        "textContent": "这是我的活动说明！",
        "fontSize": 14,
        "color": "#FFFFFF",
        "fontWeight": "bold",
        "textAlign": "center"
      }
    }
  ]
}